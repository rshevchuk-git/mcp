{
  "version": "1.0",
  "format": "aws-mcp-bytecode",
  "workflow_id": "s3_lifecycle_policy_v1_0",
  "checksum": "05681cd2148eb93f71c5cddc9ca956de21aa9806472ac92b5d0e9698a53fe8c6",
  "metadata": {
    "name": "s3_lifecycle_policy",
    "version": "1.0",
    "description": "Configure S3 bucket lifecycle policies for cost optimization",
    "author": "poc-demo",
    "created_at": "2025-07-22T07:53:20.490611",
    "tags": [
      "s3",
      "lifecycle",
      "storage",
      "cost-optimization"
    ]
  },
  "parameters": {
    "bucket_name": {
      "type": "string",
      "required": true,
      "default": null,
      "description": "S3 bucket name"
    },
    "standard_days": {
      "type": "integer",
      "required": false,
      "default": 30,
      "description": "Days to keep objects in STANDARD storage class"
    },
    "glacier_days": {
      "type": "integer",
      "required": false,
      "default": 90,
      "description": "Days to transition objects to GLACIER storage class"
    },
    "expiration_days": {
      "type": "integer",
      "required": false,
      "default": 365,
      "description": "Days until object expiration"
    }
  },
  "execution_plan": [
    {
      "step_id": "validate_bucket",
      "type": "command",
      "timeout": 60,
      "intent": "check if S3 bucket exists",
      "context": {
        "service": "s3",
        "bucket": "${params.bucket_name}"
      }
    },
    {
      "step_id": "get_current_lifecycle",
      "type": "command",
      "timeout": 60,
      "intent": "get current lifecycle configuration for S3 bucket",
      "context": {
        "service": "s3",
        "bucket": "${params.bucket_name}"
      },
      "depends_on": [
        "validate_bucket"
      ]
    },
    {
      "step_id": "put_lifecycle_policy",
      "type": "command",
      "timeout": 120,
      "intent": "put lifecycle configuration on S3 bucket with transition to glacier and expiration",
      "context": {
        "service": "s3",
        "bucket": "${params.bucket_name}",
        "standard_days": "${params.standard_days}",
        "glacier_days": "${params.glacier_days}",
        "expiration_days": "${params.expiration_days}"
      },
      "depends_on": [
        "get_current_lifecycle"
      ]
    }
  ],
  "required_permissions": [
    "s3:GetBucketLifecycleConfiguration",
    "s3:PutBucketLifecycleConfiguration",
    "s3:HeadBucket"
  ],
  "security": {
    "tier": "community",
    "max_duration": 300,
    "validated": true,
    "risk_score": 2.5
  }
}